<div class="panel">
    <h3>Rechercher</h3>
    <http-search url="{{ctrl.searchUrl}}" ng-model="ctrl.searchString"></http-search>
    <button class="btn btn-success pull-right" ng-click="ctrl.search()">Afficher</button>
</div>
<button type="button" ng-if="ctrl.user_is_admin" class="btn btn-success" ng-click="ctrl.edit()">Nouveau</button>
<hr />
<div ng-class="{'col-lg-12': !(ctrl.editing || ctrl.showing), 'col-lg-6': (ctrl.editing || ctrl.showing)}" ng-if="ctrl.searchResults.length">
    <div class="panel panel-primary"> 
        <div class="panel-heading">
            <div class="panel-title">Resultats de la recherche</div>
        </div>
        <div class="panel-content">
            <table class="table table-stripped table-bordered">
                <tr>
                    <th ng-if="ctrl.user_is_admin" >Actions</th>
                    <th ng-repeat="col in ctrl.columns">
                        {{col.label}}
                    </th>
                </tr>
                <tr ng-repeat="item in ctrl.searchResults" ng-click="ctrl.show(item)" ng-class="{'table_row': item.id!=ctrl.current.id, 'table_row_selected': item.id==ctrl.current.id}">
                    <td ng-if="ctrl.user_is_admin" >
                        <button type="button" class="btn btn-warning btn-sm" ng-click="ctrl.edit(item)"><span class="glyphicon glyphicon-file"></span></button>
                    </td>
                    <td ng-repeat="col in ctrl.columns">
                        {{item[col.name]}}
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
<div ng-class="{'col-lg-6': ctrl.searchResults.length, 'col-lg-12': !ctrl.searchResults.length}" ng-if="ctrl.editing" ng-include="'/static/js/templates/annuaire/form.htm'">
</div>

<div class="col-lg-6" ng-if="ctrl.showing" ng-include="'/static/js/templates/annuaire/show.htm'">
</div>
